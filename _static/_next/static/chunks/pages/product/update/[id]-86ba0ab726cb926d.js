(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[858],{75101:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/update/[id]",function(){return n(51021)}])},51021:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var a=n(85893),r=n(67294),i=n(9669),o=n.n(i),s=n(86886),d=n(87357),c=n(11057),l=n(14924),u=n(26042),p=n(69396),h=n(66242),m=n(18972),g=n(18360),f=n(50122),x=n(50135),y=n(78445),Z=n(15861),j=n(44267),_=n(94054),b=n(59694),v=(n(71910),n(81856),n(52034),n(49634),n(32144)),P=function(e){var t=e.setMainValues,n=e.mainValues;(0,r.useEffect)((function(){c(n)}),[n]);var i=(0,r.useState)(n),d=i[0],c=i[1],P=(0,r.useState)([]),w=(P[0],P[1],(0,r.useState)({password:"",showPassword:!1})),S=(w[0],w[1],function(e){c((0,p.Z)((0,u.Z)({},d),(0,l.Z)({},e.target.name,e.target.value))),t((0,p.Z)((0,u.Z)({},d),(0,l.Z)({},e.target.name,e.target.value)))}),C=(0,r.useState)([]),E=(C[0],C[1],(0,r.useState)([])),W=E[0],q=E[1],B=(0,r.useState)([]),N=B[0],A=B[1];return(0,r.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("userData"));o()({url:"https://api.tryme.info/graphql",method:"post",data:{query:"\n    query {\n      storeFindAllByUser(user_id: ".concat(e.id,") {\n          id,\n          user_id,\n          name,\n          site_name,\n          description,\n          image,\n          status,\n          created_at,\n          updated_at\n      }\n  }")},headers:{Authorization:"Bearer "+window.localStorage.getItem("accessToken")}}).then((function(e){console.log(e.data.data.storeFindAllByUser),A(e.data.data.storeFindAllByUser),o()({url:"https://api.tryme.info/graphql",method:"post",data:{query:"\n        query {\n          productCategoryFindAllByStore(store_id: ".concat(e.data.data.storeFindAllByUser[0].id,") {\n              id,\n              store_id,\n              name,\n              slug,\n              image,\n              attributes {\n                  id,\n                  name,\n                  status\n              }\n              status,\n              created_at,\n              updated_at\n          }\n      }")},headers:{Authorization:"Bearer "+window.localStorage.getItem("accessToken")}}).then((function(e){q(e.data.data.productCategoryFindAllByStore)}))}))}),[]),(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(y.Z,{title:"Product Information",titleTypographyProps:{variant:"h6"}}),N.length>0&&(0,a.jsx)(f.Z,{target:"_blank",href:"https://store.tryme.info/app/"+N[0].site_name,underline:"hover",sx:{position:"absolute",top:"18%",left:"50%"},children:"https://store.tryme.info/app/"+N[0].site_name}),0==N.length&&(0,a.jsx)(f.Z,{href:"/dashboard",underline:"hover",sx:{position:"absolute",top:"18%",left:"50%",color:"red"},children:"Please setup your store .. click here"}),(0,a.jsx)(j.Z,{children:(0,a.jsx)("form",{onSubmit:function(e){return e.preventDefault()},children:(0,a.jsxs)(s.ZP,{container:!0,spacing:5,children:[(0,a.jsxs)(s.ZP,{item:!0,xs:12,children:[(0,a.jsx)(Z.Z,{sx:{mb:2,fontWeight:500},children:"Product Name"}),(0,a.jsx)(x.Z,{autoComplete:"off",name:"name",value:d.name&&d.name,onChange:S,fullWidth:!0,placeholder:"Enter product name"})]}),(0,a.jsx)(s.ZP,{item:!0,xs:12,children:(0,a.jsxs)(s.ZP,{item:!0,xs:6,children:[(0,a.jsx)(Z.Z,{sx:{mb:2,fontWeight:500},children:"Product Category"}),(0,a.jsx)(_.Z,{fullWidth:!0,children:(0,a.jsxs)(g.Z,{name:"category",defaultValue:d.category,value:d.category,displayEmpty:!0,inputProps:{"aria-label":"Without label"},onChange:S,children:[(0,a.jsx)(m.Z,{value:"",children:(0,a.jsx)("em",{children:"Select Category .."})}),W.map((function(e){return(0,a.jsx)(m.Z,{value:e.id,children:e.name},e.id)}))]})})]})}),(0,a.jsxs)(s.ZP,{item:!0,xs:6,children:[(0,a.jsx)(Z.Z,{sx:{mb:2,fontWeight:500},children:"Price"}),(0,a.jsx)(x.Z,{autoComplete:"off",name:"price",value:d.price,onChange:S,fullWidth:!0,placeholder:"Enter price"})]}),(0,a.jsxs)(s.ZP,{item:!0,xs:6,children:[(0,a.jsx)(Z.Z,{sx:{mb:2,fontWeight:500},children:"Discounted Price"}),(0,a.jsx)(x.Z,{autoComplete:"off",name:"dPrice",value:d.dPrice,onChange:S,fullWidth:!0,placeholder:"Enter discounted price"})]}),(0,a.jsxs)(s.ZP,{item:!0,xs:6,children:[(0,a.jsx)(Z.Z,{sx:{mb:2,fontWeight:500},children:"Veg / Non Veg / Egg"}),(0,a.jsx)(_.Z,{fullWidth:!0,children:(0,a.jsxs)(g.Z,{defaultValue:"",displayEmpty:!0,value:d.type,name:"type",onChange:S,inputProps:{"aria-label":"Without label"},children:[(0,a.jsx)(m.Z,{value:"",children:(0,a.jsx)("em",{children:"None"})}),(0,a.jsx)(m.Z,{value:"Veg",children:"Veg"}),(0,a.jsx)(m.Z,{value:"Non Veg",children:"Non Veg"}),(0,a.jsx)(m.Z,{value:"Egg",children:"Egg"})]})})]}),(0,a.jsxs)(s.ZP,{item:!0,xs:12,children:[(0,a.jsx)(Z.Z,{sx:{mb:2,fontWeight:500},children:"Product Media (up to 5)"}),(0,a.jsx)(b.Z,{children:(0,a.jsx)(s.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{fileId:function(e){return n="file",a=e,c((0,p.Z)((0,u.Z)({},d),(0,l.Z)({},n,a))),void t((0,p.Z)((0,u.Z)({},d),(0,l.Z)({},n,a)));var n,a}})})})]}),(0,a.jsxs)(s.ZP,{item:!0,xs:12,children:[(0,a.jsx)(Z.Z,{sx:{mb:2,fontWeight:500},children:"Product Description"}),(0,a.jsx)(x.Z,{autoComplete:"off",onChange:S,name:"description",value:d.description,fullWidth:!0,placeholder:"Enter product description"})]})]})})})]})},w=(n(77447),n(98456)),S=n(11163),C=function(){var e=(0,S.useRouter)(),t=(0,r.useState)(""),n=(t[0],t[1]),i=(0,r.useState)(!1),l=i[0],u=i[1],p=(0,r.useState)({category:"",dPrice:"",description:"",file:"",type:"",price:"",name:""}),h=p[0],m=p[1],g=(0,r.useState)([]),f=(g[0],g[1]);(0,r.useEffect)((function(){var t=JSON.parse(window.localStorage.getItem("userData"));o()({url:"https://api.tryme.info/graphql",method:"post",data:{query:"\n    query {\n      storeFindAllByUser(user_id: ".concat(t.id,") {\n          id,\n          user_id,\n          name,\n          site_name,\n          description,\n          image,\n          status,\n          created_at,\n          updated_at\n      }\n  }")},headers:{Authorization:"Bearer "+window.localStorage.getItem("accessToken")}}).then((function(e){n(e.data.data.title),f(e.data.data.storeFindAllByUser)})),o()({url:"https://api.tryme.info/graphql",method:"post",data:{query:"\n    query getProductById{\n      productFindOne(id:".concat(e.query.id,"){\n    id\n    title\n    price\n    discount\n    long_description\n    category_id\n  }\n\n}\n")},headers:{Authorization:"Bearer "+window.localStorage.getItem("accessToken")}}).then((function(e){console.log(e.data.data.productFindOne);var t=e.data.data.productFindOne,n=t.category_id,a=t.long_description,r=t.discount,i=t.title,o=t.price,s=t.story_id;m({category:n,description:a,dPrice:r,name:i,price:o,type:s})}))}),[]);return(0,a.jsxs)(s.ZP,{container:!0,spacing:6,className:"match-height",children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,children:(0,a.jsx)(P,{setMainValues:m,mainValues:h})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,children:(0,a.jsx)(d.Z,{sx:{gap:5,display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center"},children:(0,a.jsxs)(c.Z,{disabled:!h.name||!h.category||l,type:"button",onClick:function(t){return u(!0),void o()({url:"https://api.tryme.info/graphql",method:"post",data:{query:"\n        mutation productUpdate{\n          productUpdate(id:".concat(e.query.id,",\n            data:{\n            category_id: ").concat(h.category,',\n            title: "').concat(h.name,'",\n            short_description: "').concat(h.description,'",\n            long_description: "').concat(h.description,'",\n            html_content: "').concat(h.description,'",\n            price: ').concat(Number(h.price),",\n            discount: ").concat(Number(h.dPrice),',\n            store_id:3,\n            status: Active,\n            media_ids:"11",\n      }) {\n          id,\n      }\n  }\n\n\n        ')},headers:{Authorization:"Bearer "+window.localStorage.getItem("accessToken")}}).then((function(t){console.log(t),e.push("/product")})).finally((function(){u(!1)}))},color:"success",variant:"contained",size:"large",children:["Update Product",l&&(0,a.jsx)(w.Z,{size:25,sx:{position:"absolute",right:"-45px"}})]})})})]})}},77447:function(e,t,n){"use strict";n(85893),n(67294);var a=n(11496),r=n(87357);n(77028),n(16054),n(68524),n(74853),(0,a.ZP)(r.Z)((function(e){var t=e.theme;return{borderWidth:1,display:"flex",cursor:"pointer",borderStyle:"solid",padding:t.spacing(5),borderColor:t.palette.divider,"&:first-of-type":{borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:t.shape.borderRadius,borderBottomRightRadius:t.shape.borderRadius}}}))}},function(e){e.O(0,[135,2657,6006,4314,1587,8854,9774,2888,179],(function(){return t=75101,e(e.s=t);var t}));var t=e.O();_N_E=t}]);