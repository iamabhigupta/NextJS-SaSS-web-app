(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5345],{73192:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product",function(){return t(74245)}])},74245:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Q}});var r=t(85893),i=t(67294),a=t(9669),l=t.n(a),s=t(41664),o=t.n(s),c=t(11163),d=t(87357),u=t(66242),h=t(38333),x=t(86886),p=t(32360),m=t(18972),f=t(11496),g=t(93946),j=t(15861),Z=t(78445),v=t(47312),y=t(94054),S=t(44267),b=t(18360),C=t(78687),w=t(9657),k=t(17261),_=t(95898),P=t(46160),A=t(3690),F=t(83296),z=t(99642),I=t(9473),N=t(74628),W=(t(91862),t(49582)),B=t(80445),T=t(97758),q=t(11057),E=t(99964),D=t(98456),O={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:450,bgcolor:"background.paper",boxShadow:24,p:5,borderRadius:"16px"},R=function(e){var n=e.title,t=e.description,i=e.cancelFunction,a=e.closeAutomatically,l=void 0===a||a,s=e.confirmFunction,o=e.open,c=e.handleClose,u=e.loading;return(0,r.jsx)(E.Z,{open:o,onClose:c,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,r.jsxs)(d.Z,{sx:O,children:[(0,r.jsx)(j.Z,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{textAlign:"center"},children:n}),(0,r.jsx)(j.Z,{id:"modal-modal-description",sx:{mt:2},children:t}),(0,r.jsxs)(d.Z,{sx:{justifyContent:"space-between",display:"flex",mt:"20px"},children:[(0,r.jsxs)(q.Z,{variant:"contained",color:"success",onClick:function(){s&&s(),l&&c()},disabled:u,children:["Confirm",u&&(0,r.jsx)(D.Z,{size:20,sx:{position:"absolute",right:"-35px"}})]}),(0,r.jsx)(q.Z,{variant:"contained",color:"error",onClick:function(){i&&i(),l&&c()},children:"Cancel"})]})]})})},U=t(29815),H=t(46901),K=t(26447),M={admin:(0,r.jsx)(C.Z,{sx:{mr:2,color:"error.main"}}),author:(0,r.jsx)(k.Z,{sx:{mr:2,color:"warning.main"}}),editor:(0,r.jsx)(A.Z,{sx:{mr:2,color:"info.main"}}),maintainer:(0,r.jsx)(w.Z,{sx:{mr:2,color:"success.main"}}),subscriber:(0,r.jsx)(z.Z,{sx:{mr:2,color:"primary.main"}})},X={active:"success",pending:"warning",inactive:"secondary"},G=((0,f.ZP)(o())((function(e){return{marginRight:e.theme.spacing(3)}})),(0,f.ZP)(o())((function(e){return{textDecoration:"none",marginRight:e.theme.spacing(3)}})),function(e){e.avatar}),J=(0,f.ZP)("a")((function(e){var n=e.theme;return{width:"100%",display:"flex",alignItems:"center",textDecoration:"none",padding:n.spacing(1.5,4),color:n.palette.text.primary}})),Q=function(){var e=function(e){(0,I.I0)();var n=(0,i.useState)(null),t=n[0],a=n[1],s=(0,i.useState)(!1),c=s[0],d=s[1],u=(0,i.useState)(!1),x=u[0],p=u[1],f=Boolean(t),j=function(){a(null)},Z=function(){var e=(0,i.useState)([]),n=e[0],t=e[1];return{handleAddAlert:function(e){var n=e.type,i=e.text;switch(n){case"error":t((function(e){return(0,U.Z)(e).concat([(0,r.jsx)(H.Z,{severity:"error",children:"This is an error alert \u2014 check it out!"},i)])}));case"success":t((function(e){return(0,U.Z)(e).concat([(0,r.jsx)(H.Z,{severity:"success",children:"This is an error alert \u2014 check it out!"},i)])}));case"info":t((function(e){return(0,U.Z)(e).concat([(0,r.jsx)(H.Z,{severity:"error",children:"This is an error alert \u2014 check it out!"},i)])}))}},AlertElement:(0,r.jsx)(K.Z,{sx:{position:"fixed",right:"10px",top:"60px"},children:n})}}();Z.handleAddAlert,Z.AlertElement;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{size:"small",onClick:function(e){a(e.currentTarget)},children:(0,r.jsx)(P.Z,{})}),(0,r.jsxs)(h.Z,{keepMounted:!0,anchorEl:t,open:f,onClose:j,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:[(0,r.jsx)(m.Z,{sx:{p:0},children:(0,r.jsx)(o(),{href:"/apps/user/view/".concat(e),passHref:!0,children:(0,r.jsxs)(J,{children:[(0,r.jsx)(_.Z,{fontSize:"small",sx:{mr:2}}),"View"]})})}),(0,r.jsxs)(m.Z,{onClick:function(){return n="/product/update/".concat(e),void ie.push(n);var n},children:[(0,r.jsx)(A.Z,{fontSize:"small",sx:{mr:2}}),"Edit"]}),(0,r.jsxs)(m.Z,{onClick:function(){return d(!0)},children:[(0,r.jsx)(F.Z,{fontSize:"small",sx:{mr:2}}),"Delete"]}),(0,r.jsx)(R,{title:"Are you sure you want to remove the product?",open:c,confirmFunction:function(){return d(!0),p(!0),console.log(e),l()({url:"https://api.tryme.info/graphql",method:"post",data:{query:"\n          mutation productDelete{\n        productDelete(id:".concat(e,")\n      }")},headers:{Authorization:"Bearer "+window.localStorage.getItem("accessToken")}}).then((function(e){console.log(e),d(!1),re((function(e){return!e}))})).finally((function(){p(!1),se((function(n){return n.filter((function(n){return n.id!=e}))}))})),void j()},cancelFunction:function(){return d(!1)},closeAutomatically:!1,loading:x,handleClose:function(){return d(!1)}})]})]})},n=[{flex:.2,minWidth:230,field:"name",headerName:"Products",renderCell:function(e){var n=e.row;n.id,n.fullName,n.username;return(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[G(n),(0,r.jsx)(d.Z,{sx:{display:"flex",alignItems:"flex-start",flexDirection:"column"},children:(0,r.jsx)(j.Z,{noWrap:!0,component:"a",variant:"caption",sx:{textDecoration:"none"},children:n.title})})]})}},{flex:.2,minWidth:250,field:"price",headerName:"Price",renderCell:function(e){var n=e.row;return(0,r.jsx)(j.Z,{noWrap:!0,variant:"body2",children:n.price})}},{flex:.15,field:"role",minWidth:150,headerName:"Inventory",renderCell:function(e){var n=e.row;return(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[M[n.role],(0,r.jsx)(j.Z,{noWrap:!0,sx:{color:"text.secondary",textTransform:"capitalize"},children:n.role})]})}},{flex:.15,minWidth:120,headerName:"Plan",field:"currentPlan",renderCell:function(e){var n=e.row;return(0,r.jsx)(j.Z,{variant:"subtitle1",noWrap:!0,sx:{textTransform:"capitalize"},children:n.currentPlan})}},{flex:.1,minWidth:110,field:"status",headerName:"Status",renderCell:function(n){var t=n.row;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.Z,{skin:"light",size:"small",label:t.status,color:X[t.status],sx:{textTransform:"capitalize","& .MuiChip-label":{lineHeight:"18px"}}}),(0,r.jsx)(d.Z,{sx:{ml:2},children:e(t.id)})]})}}],t=(0,i.useState)(""),a=t[0],s=t[1],f=(0,i.useState)(""),C=f[0],w=f[1],k=(0,i.useState)(""),z=k[0],q=k[1],E=(0,i.useState)(""),D=E[0],O=E[1],Q=(0,i.useState)(10),V=Q[0],L=Q[1],Y=(0,i.useState)(!1),$=Y[0],ee=Y[1],ne=(0,i.useState)(!1),te=ne[0],re=ne[1],ie=(0,c.useRouter)(),ae=(0,i.useState)([]),le=ae[0],se=ae[1],oe=(0,i.useState)([]),ce=(oe[0],oe[1]);(0,i.useEffect)((function(){var e="",n=JSON.parse(window.localStorage.getItem("userData"));l()({url:"https://api.tryme.info/graphql",method:"post",data:{query:"\n    query {\n      storeFindAllByUser(user_id: ".concat(n.id,") {\n          id,\n          user_id,\n          name,\n          site_name,\n          description,\n          image,\n          status,\n          created_at,\n          updated_at\n      }\n  }")},headers:{Authorization:"Bearer "+window.localStorage.getItem("accessToken")}}).then((function(n){console.log(n.data.data.storeFindAllByUser),ce(n.data.data.storeFindAllByUser),0===(n.data.data.storeFindAllByUser||[]).length&&(e="#@"),(n.data.data.storeFindAllByUser||[]).length>0&&(e=n.data.data.storeFindAllByUser[0].site_name),l()({url:"https://api.tryme.info/graphql",method:"post",data:{query:'\n        query {\n          productFindAllBySiteName(site_name: "'.concat(e,'") {\n              id,\n              store_id,\n              category_id,\n              title,\n              short_description,\n              long_description,\n              html_content,\n              price,\n              discount,\n              country_of_origin,\n              image,\n              attributes {\n                  name,\n                  value\n              },\n              faqs {\n                  id,\n                  question,\n                  answer,\n              },\n              stock,\n              status,\n              created_at,\n              updated_at\n          }\n      }')},headers:{Authorization:"Bearer "+window.localStorage.getItem("accessToken")}}).then((function(e){console.log(e.data.data.productFindAllBySiteName),(e.data.data.productFindAllBySiteName||[]).length>0?se(e.data.data.productFindAllBySiteName):se([])}))}))}),[te]);var de=(0,I.I0)();(0,I.v9)((function(e){return e.user}));(0,i.useEffect)((function(){de((0,W.rQ)({role:a,status:D,q:z,currentPlan:C}))}),[de,C,a,D,z]);var ue=(0,i.useCallback)((function(e){q(e)}),[]),he=(0,i.useCallback)((function(e){s(e.target.value)}),[]),xe=(0,i.useCallback)((function(e){w(e.target.value)}),[]),pe=(0,i.useCallback)((function(e){O(e.target.value)}),[]),me=function(){return ee(!$)};return(0,r.jsxs)(x.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(Z.Z,{title:"Search Filters",sx:{pb:4,"& .MuiCardHeader-title":{letterSpacing:".15px"}}}),(0,r.jsx)(S.Z,{children:(0,r.jsxs)(x.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(x.ZP,{item:!0,sm:4,xs:12,children:(0,r.jsxs)(y.Z,{fullWidth:!0,children:[(0,r.jsx)(v.Z,{id:"role-select",children:"Select Category"}),(0,r.jsxs)(b.Z,{fullWidth:!0,value:a,id:"select-role",label:"Select Category",labelId:"role-select",onChange:he,inputProps:{placeholder:"Select Category"},children:[(0,r.jsx)(m.Z,{value:"",children:"Select Category"}),(0,r.jsx)(m.Z,{value:"admin",children:"Kirana"}),(0,r.jsx)(m.Z,{value:"author",children:"Kirana"}),(0,r.jsx)(m.Z,{value:"editor",children:"Kirana"}),(0,r.jsx)(m.Z,{value:"maintainer",children:"Kirana"}),(0,r.jsx)(m.Z,{value:"subscriber",children:"Kirana"})]})]})}),(0,r.jsx)(x.ZP,{item:!0,sm:4,xs:12,children:(0,r.jsxs)(y.Z,{fullWidth:!0,children:[(0,r.jsx)(v.Z,{id:"plan-select",children:"Stock"}),(0,r.jsxs)(b.Z,{fullWidth:!0,value:C,id:"select-plan",label:"Stock",labelId:"plan-select",onChange:xe,inputProps:{placeholder:"Select Plan"},children:[(0,r.jsx)(m.Z,{value:"",children:"Stock"}),(0,r.jsx)(m.Z,{value:"basic",children:"In Stock"}),(0,r.jsx)(m.Z,{value:"company",children:"Out of Stock"})]})]})}),(0,r.jsx)(x.ZP,{item:!0,sm:4,xs:12,children:(0,r.jsxs)(y.Z,{fullWidth:!0,children:[(0,r.jsx)(v.Z,{id:"status-select",children:"Select Status"}),(0,r.jsxs)(b.Z,{fullWidth:!0,value:D,id:"select-status",label:"Select Status",labelId:"status-select",onChange:pe,inputProps:{placeholder:"Select Role"},children:[(0,r.jsx)(m.Z,{value:"",children:"Select Role"}),(0,r.jsx)(m.Z,{value:"pending",children:"Pending"}),(0,r.jsx)(m.Z,{value:"active",children:"Active"}),(0,r.jsx)(m.Z,{value:"inactive",children:"Inactive"})]})]})})]})})]})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(B.Z,{value:z,handleFilter:ue,toggle:me}),(0,r.jsx)(p._,{autoHeight:!0,rows:le,columns:n,checkboxSelection:!0,pageSize:V,disableSelectionOnClick:!0,rowsPerPageOptions:[10,25,50],sx:{"& .MuiDataGrid-columnHeaders":{borderRadius:0}},onPageSizeChange:function(e){return L(e)}})]})}),(0,r.jsx)(T.Z,{open:$,toggle:me})]})}}},function(e){e.O(0,[135,2657,6628,4231,2360,5496,8790,2441,9774,2888,179],(function(){return n=73192,e(e.s=n);var n}));var n=e.O();_N_E=n}]);